(function(){var v=function(y){this.sections=[];this.startingNode=y};v.prototype={heading:false,append:function(y){y.container=this;this.sections.push(y)},asHTML:function(y){var z=b(this.heading);if(y){z='<a href="#'+s(this.startingNode)+'">'+z+"</a>"}return z+x(this.sections,y)},asDOM:function(y){return p(this.sections,y)}};var x=function(B,z){var y="";for(var A=0;A<B.length;A++){y+="<li>"+B[A].asHTML(z)+"</li>"}return(y==""?y:"<ol>"+y+"</ol>")};var p=function(F,B){if(F==null||F.length==0){return null}var A=document.createElement("ol");for(var D=0;D<F.length;D++){var y=document.createElement("li");var E=e(F[D].heading);var C=p(F[D].sections,B);if(!B){y.appendChild(E)}else{var z=document.createElement("a");z.appendChild(E);z.setAttribute("href","#"+s(F[D].startingNode));y.appendChild(z)}if(C!=null){y.appendChild(C)}A.appendChild(y)}return A};var k=function(z){var y=z.heading;return f(y)?i(y):1};var e=function(z){if(f(z)){if(q(z)=="HGROUP"){z=z.getElementsByTagName("h"+(-i(z)))[0]}var y=document.createElement("I");y.innerHTML="No text content inside "+z.nodeName;var A=z.textContent||z.innerText;return A?document.createTextNode(A):y}return z};var b=function(y){return e(y).outerHTML};var s=function(y){var z=y.getAttribute("id");if(z){return z}do{z="h5o-"+(++n)}while(r.getElementById(z));y.setAttribute("id",z);return z};var a,t,j,n,r;var u=function(y,B,z,C){var A=y;start:while(A){if(!C(A)){B(A);if(A.firstChild){A=A.firstChild;continue start}z(A)}while(A){if(A==y){A=null}else{if(A.nextSibling){A=A.nextSibling;continue start}else{A=A.parentNode;z(A)}}}}};var c=function(B){if(f(g(j))){return}if(h(B)||l(B)){if(a!=null){j.push(a)}a=B;t=new v(B);a.outline={sections:[t],startingNode:B,asHTML:function(D){return x(this.sections,D)},asDOM:function(D){return p(this.sections,D)}};return}if(a==null){return}if(f(B)){if(!t.heading){t.heading=B}else{if(i(B)>=k(w(a.outline))){var A=new v(B);a.outline.sections.push(A);t=A;t.heading=B}else{var z=false;var y=t;do{if(i(B)<k(y)){var A=new v(B);y.append(A);t=A;t.heading=B;z=true}var C=y.container;y=C}while(!z)}}j.push(B);return}};var m=function(A){var z=g(j);if(f(z)){if(z==A){j.pop()}return}if((h(A)||l(A))&&!t.heading){t.heading=document.createElement("I");t.heading.appendChild(document.createTextNode("Untitled "+q(A)))}if(h(A)&&j.length>0){a=j.pop();t=w(a.outline);for(var y=0;y<A.outline.sections.length;y++){t.append(A.outline.sections[y])}return}if(l(A)&&j.length>0){a=j.pop();t=w(a.outline);while(t.sections.length>0){t=w(t)}return}if(h(A)||l(A)){t=a.outline.sections[0];return}};var q=function(y){return y.tagName.toUpperCase()};var d=function(y){return function(z){return o(z)&&(new RegExp(y,"i")).test(q(z))}};var l=d("^BLOCKQUOTE|BODY|DETAILS|FIELDSET|FIGURE|TD$"),h=d("^ARTICLE|ASIDE|NAV|SECTION$"),f=d("^H[1-6]|HGROUP$"),o=function(y){return y&&y.tagName};var i=function(A){var y=q(A);if(y=="HGROUP"){for(var z=1;z<=6;z++){if(A.getElementsByTagName("H"+z).length>0){return -z}}}else{return -parseInt(y.substr(1))}};var w=function(y){return g(y.sections)};var g=function(y){return y[y.length-1]};HTML5Outline=function(z,y){n=0;y=y||function(){return false};r=z.ownerDocument||window.document;a=null;t=null;j=[];u(z,c,m,y);return a!=null?a.outline:null}}());